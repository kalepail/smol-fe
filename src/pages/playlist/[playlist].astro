---
import Home from "../../components/Home.svelte";
import Leaderboard from "../../components/Leaderboard.svelte";
import Layout from "../../layouts/Layout.astro";

const results = await fetch(`${import.meta.env.PUBLIC_API_URL}/playlist/${Astro.params.playlist}`)
.then((res) => {
	if (res.ok) return res.json();
	return [];
});
---

<Layout
	title=`Smol â€“ ${Astro.params.playlist}`
>
	<Leaderboard smols={results.smols} users={results.users} client:visible={{rootMargin: "200px"}} />
	<Home results={results.smols} playlist={Astro.params.playlist} client:visible={{rootMargin: "200px"}} />
</Layout>

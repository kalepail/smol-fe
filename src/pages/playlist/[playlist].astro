---
import Home from "../../components/Home.svelte";
import Leaderboard from "../../components/Leaderboard.svelte";
import Layout from "../../layouts/Layout.astro";

const results = await fetch(`${import.meta.env.PUBLIC_API_URL}/playlist/${Astro.params.playlist}`)
.then((res) => {
	if (res.ok) return res.json();
	return [];
});
---

<Layout
	title=`Smol â€“ ${Astro.params.playlist}`
	description="Smol art onchain"
	song_url="https://cdn2.aisonggenerator.io/491bb94b-79df-41bb-b09b-2d295f1dfd05.mp3"
	image_url="https://smol.xyz/meta.png"
>
	<Leaderboard smols={results.smols} users={results.users} client:load />
	<Home results={results.smols} playlist={Astro.params.playlist} client:load />
</Layout>
